{"version":3,"sources":["js/demo1/demo6.js"],"names":["body","document","MathUtils","lerp","a","b","n","distance","x1","y1","x2","y2","Math","hypot","getMousePos","ev","posx","posy","window","event","pageX","pageY","clientX","clientY","scrollLeft","docEl","scrollTop","x","y","mousePos","lastMousePos","addEventListener","getMouseDistance","Image","el","DOM","defaultStyle","opacity","getRect","initEvents","resize","TweenMax","set","rect","getBoundingClientRect","ImageTrail","content","querySelector","images","querySelectorAll","forEach","img","push","imagesTotal","length","imgPosition","zIndexVal","threshold","showNextImage","requestAnimationFrame","render","killTweensOf","TimelineMax","zIndex","to","ease","Expo","easeOut","preloadImages","Promise","resolve","reject","imagesLoaded","background","then","classList","remove"],"mappings":"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","file":"demo6.90a960d1.js","sourceRoot":"../src","sourcesContent":["/**\n* demo6.js\n* http://www.codrops.com\n*\n* Licensed under the MIT license.\n* http://www.opensource.org/licenses/mit-license.php\n* \n* Copyright 2019, Codrops\n* http://www.codrops.com\n*/\n{\n    // body element\n    const body = document.body;\n\n    // helper functions\n    const MathUtils = {\n        // linear interpolation\n        lerp: (a, b, n) => (1 - n) * a + n * b,\n        // distance between two points\n        distance: (x1,y1,x2,y2) => Math.hypot(x2-x1, y2-y1)\n    }\n\n    // get the mouse position\n    const getMousePos = (ev) => {\n        let posx = 0;\n        let posy = 0;\n        if (!ev) ev = window.event;\n        if (ev.pageX || ev.pageY) {\n            posx = ev.pageX;\n            posy = ev.pageY;\n        }\n        else if (ev.clientX || ev.clientY) \t{\n            posx = ev.clientX + body.scrollLeft + docEl.scrollLeft;\n            posy = ev.clientY + body.scrollTop + docEl.scrollTop;\n        }\n        return {x: posx, y: posy};\n    }\n\n    // mousePos: current mouse position\n    // lastMousePos: last last recorded mouse position (at the time the last image was shown)\n    let mousePos = lastMousePos = {x: 0, y: 0};\n    \n    // update the mouse position\n    window.addEventListener('mousemove', ev => mousePos = getMousePos(ev));\n    \n    // gets the distance from the current mouse position to the last recorded mouse position\n    const getMouseDistance = () => MathUtils.distance(mousePos.x,mousePos.y,lastMousePos.x,lastMousePos.y);\n\n    class Image {\n        constructor(el) {\n            this.DOM = {el: el};\n            // image deafult styles\n            this.defaultStyle = {\n                x: 0,\n                y: 0,\n                opacity: 1\n            };\n            // get sizes/position\n            this.getRect();\n            // init/bind events\n            this.initEvents();\n        }\n        initEvents() {\n            // on resize get updated sizes/position\n            window.addEventListener('resize', () => this.resize());\n        }\n        resize() {\n            // reset styles\n            TweenMax.set(this.DOM.el, this.defaultStyle);\n            // get sizes/position\n            this.getRect();\n        }\n        getRect() {\n            this.rect = this.DOM.el.getBoundingClientRect();\n        }\n    }\n\n    class ImageTrail {\n        constructor() {\n            // images container\n            this.DOM = {content: document.querySelector('.content')};\n            // array of Image objs, one per image element\n            this.images = [];\n            [...this.DOM.content.querySelectorAll('div.content__img')].forEach(img => this.images.push(new Image(img)));\n            // total number of images\n            this.imagesTotal = this.images.length;\n            // upcoming image index\n            this.imgPosition = 0;\n            // zIndex value to apply to the upcoming image\n            this.zIndexVal = 1;\n            // mouse distance required to show the next image\n            this.threshold = 100;\n            this.showNextImage();\n            // render the images\n            requestAnimationFrame(() => this.render());\n        }\n        render() {\n            // get distance between the current mouse position and the position of the previous image\n            let distance = getMouseDistance();\n\n            // if the mouse moved more than [this.threshold] then show the next image\n            if ( distance > this.threshold ) {\n                this.showNextImage();\n            }\n\n            // loop..\n            requestAnimationFrame(() => this.render());\n        }\n        showNextImage() {\n            // show image at position [this.imgPosition]\n            const img = this.images[this.imgPosition];\n            // kill any tween on the image\n            TweenMax.killTweensOf(img.DOM.el);\n\n            new TimelineMax()\n            // show the image\n            .set(img.DOM.el, {\n                opacity: 1,\n                x: mousePos.x > lastMousePos.x ? 100 : -100,\n                zIndex: this.zIndexVal\n            }, 0)\n            // animate position\n            .to(img.DOM.el, 1.2, {\n                ease: Expo.easeOut,\n                x: 0\n            }, 0);\n\n            ++this.zIndexVal;\n            this.imgPosition = this.imgPosition < this.imagesTotal-1 ? this.imgPosition+1 : 0;\n            \n            lastMousePos = mousePos;\n        }\n    }\n\n    /***********************************/\n    /********** Preload stuff **********/\n\n    // Preload images\n    const preloadImages = () => {\n        return new Promise((resolve, reject) => {\n            imagesLoaded(document.querySelectorAll('.content__img'), {background: true}, resolve);\n        });\n    };\n    \n    // And then..\n    preloadImages().then(() => {\n        // Remove the loader\n        document.body.classList.remove('loading');\n        new ImageTrail();\n    });\n}"]}